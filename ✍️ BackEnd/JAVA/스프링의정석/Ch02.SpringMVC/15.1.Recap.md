# ìŠ¤í”„ë§ì˜ ì •ì„
- 2022.05.28(í† )
- ê°•ì˜ ëª©í‘œ: Springì˜ ê¸°ë³¸ ì›ë¦¬ ì´í•´, Springìœ¼ë¡œ ì›¹ ì‚¬ì´íŠ¸ êµ¬ì¶• & AWS ë°°í¬
- ê°•ì˜ ìë£Œ: https://github.com/castello/spring_basic
- ê°•ì˜ ì§„ë„ 
	- Ch0220. @GetMapping, @PostMapping(1)
	- Ch0221. @GetMapping, @PostMapping(2)

<br>


## ğŸ’¬ Recap
### @RequestMapping
```java
@RequestMapping("/register/test")	// GET, POSTë°©ì‹
@RequestMapping("/register/test" method=RequestMethod.Get)	// GETë°©ì‹
@RequestMapping("/register/test" method=RequestMethod.POST)	// POSTë°©ì‹
@RequestMapping("/register/test" method={RequestMethod.Get, RequestMethod.POST}) // GET, POSTë°©ì‹
```
- `@RequestMapping`ì— method ì§€ì •ì„ ìƒëµí•˜ë©´ defaultë¡œ GETë°©ì‹ê³¼ POSTë°©ì‹ì´ ëª¨ë‘ ì ìš©ëœë‹¤
- GETë°©ì‹ì´ë‚˜ POSTë°©ì‹ ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ ì§€ì •í•  ë•Œì—ëŠ” `@RequestMapping` ë³´ë‹¤ `@PostMapping`, `@GetMapping`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ í¸ë¦¬í•˜ë‹¤
- `@PostMapping`, `@GetMapping`ì€ Spring 4.3ë²„ì „ì— ì¶”ê°€ëœ ê¸°ëŠ¥ì´ë‹¤
- Spring ë²„ì „ì´ 4.3ë³´ë‹¤ ë‚®ë‹¤ë©´ pom.xmlì—ì„œ Spring ë²„ì „ì„ ìˆ˜ì •í•˜ê³  UpdateProjectí•œ ë‹¤ìŒ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

<br>

### @GetMapping
```java
@RequestMapping("/register/add" method=RequestMethod.GET)	// GETë°©ì‹ 
@GetMapping("/register/add")
```
- `@GetMapping`ì„ ì‚¬ìš©í•˜ë©´ ë” ê°„í¸í•˜ê²Œ methodë¥¼ GETë°©ì‹ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤
- ë§Œì•½ í•´ë‹¹ ë©”ì„œë“œì˜ ê¸°ëŠ¥ì´ GETë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” í™”ë©´ ì´ë™ ë¿ì´ë¼ë©´, view-controllerë¥¼ ë“±ë¡í•´ì„œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤
```xml
<!-- servelet-context.xml -->
<!-- beansì„¤ì • ì•„ë˜ -->
<view-controller path="/register/add" view-name="registerForm"/>
```
- Webê³¼ ê´€ë ¨ëœ ë‚´ìš©ì´ë¯€ë¡œ, ìŠ¤í”„ë§ì˜ webê´€ë ¨ ì„¤ì •íŒŒì¼ì¸ `servelet-context.xml` ì— ìœ„ì™€ ê°™ì´ ì‘ì„±í•œë‹¤ 
	- `servelet-context.xml` ê²½ë¡œ: src/main/webapp/spring/appServlet/servlet-context.xml
- view-controllerëŠ” GETë°©ì‹ì˜ ìš”ì²­ë§Œì„ í—ˆìš©í•œë‹¤ 

<br>

### @PostMapping
```java
@RequestMapping("/register/save" method=RequestMethod.POST)	// POSTë°©ì‹
@PostsMapping("/register/save")
```
- `@GetMapping`ì„ ì‚¬ìš©í•˜ë©´ ë” ê°„í¸í•˜ê²Œ methodë¥¼ POSTë°©ì‹ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤


<br>

## ğŸ’¬ @RequestMapping ë” ì•Œì•„ë³´ê¸°

### Mapping URLì˜ ê³µí†µ ë¶€ë¶„ì€ Classì— @RequestMappingí•œë‹¤
```java
@Controller
@RequestMapping("/register")
public class RegisterController(){
	@GetMapping("/add") 	// í´ë˜ìŠ¤ì— Mappingëœ URLê³¼ í•¨ê»˜ ì‚¬ìš©í•œë‹¤ -> /register/add
	public String register() {...}

	@PostMapping("/save") 	// í´ë˜ìŠ¤ì— Mappingëœ URLê³¼ í•¨ê»˜ ì‚¬ìš©í•œë‹¤ -> /register/save
	public String save(User user, Model m) throws Exception {...}
}
```
<br>

### @RequestMAppingì˜ URLíŒ¨í„´

<table>
	<tr>
		<th>ì¢…ë¥˜</th>
		<th>URL Pattern</th>
		<th>ë§¤ì¹­ URL</th>
	</tr>
	<tr>
		<th>exact mapping<br>: ì •í™•íˆ ì¼ì¹˜</th>
		<td>/login/hello.do</td>
		<td>
			http://localhost/jinsook<b style="text-decoration: underline">/login/hello.do</b>
		</td>
	</tr>
	<tr>
		<th>path mapping<br>: ê²½ë¡œ ë§¤í•‘</th>
		<td>/login/*</td>
		<td>
			http://localhost/jinsook<b style="text-decoration: underline">/login/</b> <br>
			http://localhost/jinsook<b style="text-decoration: underline">/login/</b>hello <br>
			http://localhost/jinsook<b style="text-decoration: underline">/login/</b>hello.do</b> <br>
			http://localhost/jinsook<b style="text-decoration: underline">/login/</b>test</b> 
		</td>
	</tr>
	<tr>
		<th>extension mapping<br>: í™•ì¥ì ë§¤í•‘</th>
		<td>*.do</td>
		<td>
			http://localhost/jinsook/hi<b style="text-decoration: underline">.do</b> <br>
			http://localhost/jinsook/login/hello<b style="text-decoration: underline">.do</b>
		</td>
	</tr>
</table>

<br>

- í™•ì¸ ìˆœì„œ: exactMapping â†’ pathMapping â†’ extensionMapping â†’ 404 Not Found 
- `?`ëŠ” í•œ ê¸€ì, `*`ëŠ” ì—¬ëŸ¬ ê¸€ì, `**`ëŠ” í•˜ìœ„ ê²½ë¡œë¥¼ í¬í•¨í•œë‹¤. ë°°ì—´ì„ í†µí•´ ì—¬ëŸ¬ê°€ì§€ íŒ¨í„´ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤
- @RequestMappinì˜ URLíŒ¨í„´ í…ŒìŠ¤íŠ¸ ì˜ˆì œ (ReqeustMappingTest.java)


<br>

## ğŸ’¬ URL ì¸ì½”ë”© - í¼ì„¼íŠ¸ ì¸ì½”ë”© 
<img src = "../img/ch0221_1.png">

- URLì— í¬í•¨ëœ non-ASCIIë¬¸ìë¥¼ ë¬¸ì ì½”ë“œ(16ì§„ìˆ˜) ë¬¸ìì—´ë¡œ ë³€í™˜í•œë‹¤
- ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ìš”ì²­ì„ ë°›ëŠ” ì„œë²„ê°€ ì–´ë–¤ ì¸ì½”ë”©ì„ ì‚¬ìš©í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ëª¨ë“  URLì€ ASCIIë¡œ í†µì¼í•´ì•¼í•œë‹¤
- ANCIIë¡œ ì¸ì½”ë”©í•œ URLì„ ë°›ì•„ì˜¨ ì„œë²„ëŠ” ë””ì½”ë”©ì„ í•´ì„œ ì‚¬ìš©í•œë‹¤
- ì´ëŸ¬í•œ ê³¼ì •ì„ ê°„ê²°í•˜ê²Œ í•˜ê¸°ìœ„í•´ filterë¥¼ ì‚¬ìš©í•œë‹¤


<br>
<br>
<br>
<br>

<hr>

### [ì°¸ê³ ] URL ì¬ì‘ì„±(rewrite)
- URL ì¬ì‘ì„±ì€ í•„ìš”í•œ ê²½ìš° URLì„ ë³€ê²½í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤
- ë¸Œë¼ìš°ì €ì—ì„œ URLì„ í•œê¸€ë¡œ ì…ë ¥í•˜ë©´, ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì¸ì½”ë”©ì„ ì§„í–‰í•œë‹¤
- ë°˜ë©´, URL ì¬ì‘ì„± ì‹œ í•œê¸€ì„ ì¶”ê°€í•˜ë©´ ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì¸ì½”ë”©ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤
- ê·¸ë ‡ê¸° ë•Œë¬¸ì— URL ì¬ì‘ì„±ì´ë“¤ì–´ê°€ëŠ” Controllerì—ì„œ ì§ì ‘ ì¸ì½”ë”©í•´ì•¼ë§Œ í•œë‹¤
	- `URLEncoder.encode("ì „ë‹¬í•  ë‚´ìš©", "utf-8")`
- ë§Œì•½ URL ì¬ì‘ì„± ë‚´ìš©ì„ í™”ë©´ì—ì„œë„ ì‚¬ìš©í•œë‹¤ë©´, í•´ë‹¹ jspíŒŒì¼ì—ì„œëŠ” ë””ì½”ë”©ì„ í•´ì£¼ì–´ì•¼í•œë‹¤
	- `${URLDecoder.decode(param.msg, "utf-8")}`

<br>